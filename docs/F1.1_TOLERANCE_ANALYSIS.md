# F1.1 Tolerance Analysis

## Objective

Define dimensional tolerances for the mechanical filament path and station interfaces so repeatable assembly is possible across independent community builds.

## Datum Strategy

1. Primary datum `A`: modular rail top surface.
2. Secondary datum `B`: rail centerline along X axis.
3. Tertiary datum `C`: station front reference face.

All station references in `hardware/f1_1/spec/mechanical_layout.json` use this datum structure.

## Critical Dimensions

| Feature | Nominal | Tolerance | Reason |
|---------|---------|-----------|--------|
| Filament channel diameter | 2.05mm | +0.10 / -0.00 | PTFE fit, low friction feed |
| PTFE fitting boss pilot | 4.60mm | +/-0.05 | PC4-M6 thread engagement |
| SG90 pocket width | 16.00mm | +0.20 / -0.00 | No servo binding |
| Blade slot width | 0.90mm | +/-0.05 | Blade guidance with low wobble |
| Heater cartridge bore | 6.20mm | +/-0.05 | 6.0mm cartridge retention |
| Thermistor bore | 3.20mm | +/-0.05 | Bead thermistor seat |
| Encoder axle bore | 6.00mm | +/-0.05 | Bearing and shaft concentricity |
| M3 mount hole | 3.20mm | +0.15 / -0.00 | Assembly ease without play growth |
| Mount slot width | 3.50mm | +/-0.10 | Modular station adjustment |
| Rail pitch | 20.00mm | +/-0.10 | Cross-station compatibility |

## Filament Path Deflection Budget

Maximum internal turn angle is `30°`.

Path validation computes angle at every internal waypoint:

`theta = arccos((v1 dot v2) / (|v1| * |v2|))`

Design target for normal operation:
1. nominal turns below `10°`
2. worst case turn below `30°`

## Splice Core Alignment Stack

The splice interface is the most critical stack.

1. cutter output channel positional tolerance: `+/-0.15mm`
2. splice station entry channel positional tolerance: `+/-0.15mm`
3. rail slot to rail centerline tolerance: `+/-0.10mm`
4. mount hole clearance contribution: `+/-0.10mm`

Worst-case linear misalignment estimate:
`0.15 + 0.15 + 0.10 + 0.10 = 0.50mm`

Acceptance bound:
1. max allowed center offset at splice entrance: `0.50mm`
2. preferred center offset: `<=0.25mm`

## Encoder Contact Tolerance

Encoder pressure depends on idler compression.

| Parameter | Nominal | Tolerance |
|-----------|---------|-----------|
| Idler compression | 0.60mm | +/-0.10 |
| Wheel to filament center offset | 0.00mm | +/-0.20 |
| Spring seat bore diameter | 8.00mm | +/-0.10 |

Functional check:
1. no flattening of filament from over-compression
2. no missed motion from under-compression

## Blade Clearance Tolerance

| Parameter | Nominal | Tolerance |
|-----------|---------|-----------|
| Blade slot width | 0.90mm | +/-0.05 |
| Blade-to-anvil lateral offset | 0.00mm | +/-0.10 |
| Blade penetration depth | 1.95mm | +0.10 / -0.05 |

Acceptance:
1. complete sever on PLA, PETG, ABS at 1.75mm
2. no channel gouging after repeated cuts

## Process Tolerances by Material

1. PLA and PETG station parts: expected shrink `0.3% to 0.5%`.
2. ABS heat-proximal parts: expected shrink `0.7% to 1.2%`.

Compensation rule:
1. holes under 6mm: add `+0.10mm`
2. holes above 6mm: add `+0.15mm`
3. sliding features: add `+0.20mm`

## Inspection Checklist

1. Verify all M3 holes with go gauge at 3.1mm.
2. Verify channel continuity with 2.0mm gauge pin.
3. Verify rail pitch at three locations using calipers.
4. Verify encoder idler preload using `encoder_pressure_jig`.
5. Verify cutter squareness using `cutter_square_jig`.

## Validation Artifacts

Automated checks:
1. `postprocessor/mechanical_validation.py`
2. `postprocessor/tests/test_mechanical_validation.py`
3. `scripts/hardware/validate_f1_1.py`

These checks enforce:
1. deflection limit compliance
2. print bed fit compliance
3. interface and mount consistency
4. non-overlapping station placement
